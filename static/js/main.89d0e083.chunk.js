(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,function(e,t,n){e.exports={root:"Box_root__3wb8N",box:"Box_box__3XcKJ",checked:"Box_checked__FtauF",active:"Box_active__FZFXX",activechecked:"Box_activechecked__1J_cQ"}},,,function(e,t,n){e.exports={root:"Title_root__2Xc8l",info:"Title_info__3DHXa",link:"Title_link__34YnD"}},function(e,t,n){e.exports={root:"PlayButton_root__egeke",label:"PlayButton_label__1kmG7"}},function(e,t,n){e.exports={root:"TimeSignature_root__3dXFM",length:"TimeSignature_length__29E66"}},function(e,t,n){e.exports={root:"TempoDisplay_root__29aaI",label:"TempoDisplay_label__3-ob8"}},function(e,t,n){e.exports={root:"TapTempo_root__1Vk8_",label:"TapTempo_label__2XMp2"}},function(e,t,n){e.exports={root:"ResetButton_root__3LzA7",label:"ResetButton_label__1H7Jl"}},function(e,t,n){e.exports={root:"PitchSelect_root__1NRfw",select:"PitchSelect_select__3sHnq"}},,,,,,function(e,t,n){e.exports={root:"TempoSlider_root__v3S9z"}},function(e,t,n){e.exports={root:"Buttons_root__OkpSj"}},function(e,t,n){e.exports={root:"BoxRow_root__1SXJu",box:"BoxRow_box__BzG48",checked:"BoxRow_checked__3Md4w"}},function(e,t,n){e.exports={root:"StepSequence_root__12hd-"}},,,,,function(e,t,n){e.exports=n(42)},,,,,function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),c=n(17),r=n.n(c),l=(n(34),n(25)),i=n(18),s=n(19),u=n(27),p=n(20),m=n(28),h=n(26),g=n(2),d=n.n(g),f=n(5),v=n.n(f),_=n(9),E=n.n(_),T=function(){return o.a.createElement("div",{className:E.a.root},"Step Sequencer",o.a.createElement("div",{className:E.a.info},"\xa92019"," ",o.a.createElement("a",{href:"https://github.com/sam-parsons/react-step-sequencer",className:E.a.link},"Sam Parsons")))},y=n(10),b=n.n(y),P=n(7),k=function(e){return o.a.createElement("div",{className:b.a.root,onClick:e.onTogglePlay},o.a.createElement("span",{className:b.a.label},e.isPlaying?o.a.createElement(P.a,{icon:"stop"}):o.a.createElement(P.a,{icon:"play"})))},S=n(11),C=n.n(S),x=function(e){return o.a.createElement("div",{className:C.a.root},o.a.createElement("select",{name:"length",id:"row-length",className:C.a.length,value:e.sequenceLength,onChange:function(t){e.onLengthChange(t.target.value)}},o.a.createElement("option",{value:"2"},"2"),o.a.createElement("option",{value:"3"},"3"),o.a.createElement("option",{value:"4"},"4"),o.a.createElement("option",{value:"5"},"5"),o.a.createElement("option",{value:"6"},"6"),o.a.createElement("option",{value:"7"},"7"),o.a.createElement("option",{value:"8"},"8"),o.a.createElement("option",{value:"9"},"9"),o.a.createElement("option",{value:"10"},"10"),o.a.createElement("option",{value:"11"},"11")))},w=n(21),L=n.n(w),A=function(e){return o.a.createElement("div",{className:L.a.root},o.a.createElement("input",{type:"range",min:"30",max:"300",value:e.tempo,onChange:function(t){e.onTempoChange(t.target.value)}}))},N=n(12),q=n.n(N),B=function(e){return o.a.createElement("div",{className:q.a.root},o.a.createElement("span",{className:q.a.label},e.tempo))},R=n(13),M=n.n(R),D=function(e){return o.a.createElement("div",{className:M.a.root,onClick:e.handleTap},o.a.createElement("span",{className:M.a.label},"Tap"))},j=n(14),O=n.n(j),F=function(e){return o.a.createElement("div",{className:O.a.root,onClick:e.onReset},o.a.createElement("span",{className:O.a.label},o.a.createElement(P.a,{icon:"recycle"})))},G=n(22),X=n.n(G),J=function(e){return o.a.createElement("div",{id:"buttons",className:X.a.root},o.a.createElement(k,{isPlaying:e.isPlaying,onTogglePlay:e.onTogglePlay}),o.a.createElement(x,{sequenceLength:e.sequenceLength,onLengthChange:e.onLengthChange}),o.a.createElement(F,{onReset:e.onReset}),o.a.createElement(D,{handleTap:e.handleTap}),o.a.createElement(B,{tempo:e.tempo}),o.a.createElement(A,{tempo:e.tempo,onTempoChange:e.onTempoChange}))},z=n(23),H=n.n(z),V=n(15),I=n.n(V),K=function(e){return o.a.createElement("div",{className:I.a.root},o.a.createElement("select",{name:"pitch",id:"pitch",className:I.a.select,value:e.notes[e.row],onChange:function(t){e.onPitchSelect(t.target.value,e.row)}},o.a.createElement("option",{value:"G5"},"G5"),o.a.createElement("option",{value:"Gb5"},"Gb5"),o.a.createElement("option",{value:"F5"},"F5"),o.a.createElement("option",{value:"E5"},"E5"),o.a.createElement("option",{value:"Eb5"},"Eb5"),o.a.createElement("option",{value:"D5"},"D5"),o.a.createElement("option",{value:"Db5"},"Db5"),o.a.createElement("option",{value:"C5"},"C5"),o.a.createElement("option",{value:"B4"},"B4"),o.a.createElement("option",{value:"Bb4"},"Bb4"),o.a.createElement("option",{value:"A4"},"A4"),o.a.createElement("option",{value:"Ab4"},"Ab4"),o.a.createElement("option",{value:"G4"},"G4")))},Q=n(6),Y=n.n(Q),Z=function(e){return o.a.createElement("div",{className:Y.a.root},v.a.map(e.checked[e.row],function(t,n){return o.a.createElement("div",{onClick:function(){e.onToggle(n,e.row)},className:v.a.chain([Y.a.box,t&&Y.a.checked,e.isActive[e.row][n]&&!t&&Y.a.active,e.isActive[e.row][n]&&t&&Y.a.activechecked]).compact().join(" ").value(),key:n})}))},U=function(e){return o.a.createElement("div",{className:H.a.root},o.a.createElement(K,{onPitchSelect:e.onPitchSelect,notes:e.notes,row:e.row}),o.a.createElement(Z,{checked:e.checked,row:e.row,isActive:e.isActive,onToggle:e.onToggle}))},W=n(24),$=n.n(W),ee=function(e){return o.a.createElement("div",{id:"step-sequence",className:$.a.root},o.a.createElement(U,{checked:e.checked,onToggle:e.onToggle,sequenceLength:e.sequenceLength,onPitchSelect:e.onPitchSelect,notes:e.notes,pitchConversion:e.pitchConversion,isActive:e.isActive,row:"0"}),o.a.createElement(U,{checked:e.checked,onToggle:e.onToggle,sequenceLength:e.sequenceLength,onPitchSelect:e.onPitchSelect,notes:e.notes,isActive:e.isActive,row:"1"}))},te=(n(41),n(3)),ne=n(8);function ae(e,t,n){var a=Object(h.a)(e);return a[n][t]=!a[n][t],a}var oe=new d.a.PolySynth(2,d.a.Synth).toMaster(),ce=new AudioContext;te.b.add(ne.b),te.b.add(ne.d),te.b.add(ne.c),te.b.add(ne.a);var re=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={checked:[[!0,!0,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!0,!1,!0]],isPlaying:!1,sequenceLength:7,tempo:120,isActive:[[0,0,0,1,0,1,0],[0,1,0,1,0,1,0]],renderedNotes:[],partContainer:[],notes:["Eb5","C5"],timeContainer:[],defaults:{tempo:120,sequenceLength:8,isPlaying:!1,elapsedTime:0,numberOfTaps:0,averageBPM:0,checked:[[!0,!1,!1,!1,!1,!1,!1,!1],[!1,!1,!0,!1,!0,!1,!0,!1]],notes:["Eb5","C5"],isActive:[[0,1,0,1,0,1,0,1],[0,1,0,1,0,1,0,1]]}},n.componentDidMount=function(){n.generateMetronome(),window.addEventListener("keydown",function(e){if(32===e.keyCode||13===e.keyCode)try{e.preventDefault(),n.onTogglePlay()}catch(e){console.log(e)}})},n.onToggleBox=function(e,t){n.setState(function(n){return{checked:ae(n.checked,e,t)}},function(){n.generateMetronome()})},n.onTogglePlay=function(){n.setState(function(e){return{isPlaying:!e.isPlaying}},function(){n.state.isPlaying?(d.a.Transport.loop=!0,d.a.Transport.loopStart=0,d.a.Transport.loopEnd=30*n.state.sequenceLength/n.state.tempo,d.a.Transport.start("+0.0"),console.log("playing")):(d.a.Transport.stop(),d.a.Transport.loop=!1,d.a.Transport.loopEnd=0,n.setState({isActive:[[],[]]},function(){return console.log("stopped")}))})},n.restartPlaying=function(){n.state.isPlaying?n.setState({isPlaying:n.state.isPlaying},function(){d.a.Transport.stop(),d.a.Transport.loopStart=0,d.a.Transport.loopEnd=30*n.state.sequenceLength/n.state.tempo,d.a.Transport.loop=!0,d.a.Transport.start("+0.0"),console.log("playing restarted")}):console.error("restartPlaying called while not playing")},n.onLengthChange=function(e){for(var t=[[],[]],a=0;a<e;a++)t[0].push(0===a),t[1].push(0!==a&&a%2===0);n.setState(function(){return{sequenceLength:e,checked:t}},function(){d.a.Transport.loopEnd=30*e/n.state.tempo,n.generateMetronome()})},n.onTempoChange=function(e){n.setState({tempo:e},function(){d.a.Transport.bpm.value=e})},n.onReset=function(){n.setState(function(e){return{tempo:e.defaults.tempo,sequenceLength:e.defaults.sequenceLength,isPlaying:e.defaults.isPlaying,checked:e.defaults.checked,notes:e.defaults.notes,isActive:e.defaults.isActive}},function(){n.resetTempo(),n.forceStop(),n.onLengthChange(n.state.sequenceLength),n.onPitchSelect(n.state.notes[0],0),n.onPitchSelect(n.state.notes[1],1)})},n.forceStop=function(){d.a.Transport.stop(),d.a.Transport.loop=!1,d.a.Transport.loopEnd=0,console.log("force stopped")},n.resetTempo=function(){d.a.Transport.bpm.value=n.state.defaults.tempo},n.handleTap=function(){var e=n.state.timeContainer;e.length>2&&e.shift(),e.push(ce.currentTime.toFixed(3));var t=Math.round(60/(e.slice(1).map(function(t,n){return t-e[n]}).reduce(function(e,t){return e+t},0)/(e.length-1)));t>40&&t<301&&n.setState({tempo:t},function(){return n.onTempoChange(t)})},n.onPitchSelect=function(e,t){n.setState({notes:"0"===t?[e,n.state.notes[1]]:[n.state.notes[0],e]},function(){n.generateMetronome()})},n.generateMetronome=function(){var e=n.state.partContainer;e.forEach(function(e){return e.removeAll()});for(var t=Object(l.a)(n.state.notes,2),a=t[0],o=t[1],c=n.state.sequenceLength,r=n.state.checked,i=[],s=0;s<c;s++)r[0][s]?i.push({note:a,time:"0:".concat(s/2),velocity:.05,index:s}):r[1][s]||i.push({note:a,time:"0:".concat(s/2),velocity:0,index:s}),r[1][s]&&i.push({note:o,time:"0:".concat(s/2),velocity:.05,index:s});var u=new d.a.Part(function(e,t){n.triggerVisualize(t.index),oe.triggerAttackRelease(t.note,.05,e,t.velocity)},i).start(0);e.push(u),n.setState({renderedNotes:i,partContainer:e})},n.triggerVisualize=function(e){var t=n.state.sequenceLength,a=[v.a.fill(Array(t),0),v.a.fill(Array(t),0)];a[0][e]=1,a[1][e]=1,n.setState({isActive:a})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("header",{className:"App-header"},o.a.createElement(T,null),o.a.createElement(J,{isPlaying:this.state.isPlaying,onTogglePlay:this.onTogglePlay,sequenceLength:this.state.sequenceLength,onLengthChange:this.onLengthChange,tempo:this.state.tempo,onTempoChange:this.onTempoChange,onReset:this.onReset,handleTap:this.handleTap}),o.a.createElement(ee,{checked:this.state.checked,onToggle:this.onToggleBox,sequenceLength:this.state.sequenceLength,onPitchSelect:this.onPitchSelect,notes:this.state.notes,isActive:this.state.isActive})))}}]),t}(o.a.PureComponent);r.a.render(o.a.createElement(re,null),document.getElementById("root"))}],[[29,1,2]]]);
//# sourceMappingURL=main.89d0e083.chunk.js.map